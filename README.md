# b24-modules-for-bitrix
Модуль предназначен для поулчение данных по сделкам из Б24 в зависимости от статуса.

Выбранные способ реализации:
	Модуль + компонент

Способ установки:
1)	Распаковать модуль в blinovandrej.mytestwork в папке local/modules/ 
2)	Установить модуль через административную панель (маркетплейс->установленные решения )
3)	На необходимой странице разместить компонент BlinovAndrey.b24list . В качестве инфоблока выбрать созданный при установке модуля инфоблок (Тестовая работа для Б24 -> Справочник статусов  или же Option::get("blinovandrej.mytestwork", "iblockCreated")  )

Логика модуля и компонента:
1)	Логика модуля
	a.	При установке
		i.	При установке создается раздел и инфоблок для справочников по статусам ( function CreateIblocks() )
		ii.	Копируется необходимый компонент в папку local ( function InstallFiles() )
		iii.	Инфоблок заполняется данными полученными из вебхука ( function getAndAddStatusList()  )
		iv.	Заполняются данные по настройкам модуля  через  function SetOptions($key,$value)
	b.	При удалении
		i.	Удаляется компонент
		ii.	На втором шаге, если пользователь согласился удалить данные, то удаляется инфоблок
2)	Логика компонента
	a.	Компонент отрабатывает и берет данные из указанного инфоблока, где хранятся данные по статусам
	b.	При нажатии на кнопки статусов происходит ajax запрос, по результатам которого возвращаются данные по сделкам с указанными статусами.
	c.	Данные выводятся на экран

Возможные дополнения и расширения:
1)	Можно кешировать данные, возвращаемые компонентом при ajax запросе на получении сделки, к примеру, на 5 минут, чтобы снизить нагрузку, но иметь максимально актуальные данные по сделкам.
2)	Разделить в настройках модуля поля ввода на URL, секретный ключ

